"use strict";(self.webpackChunkrcadmin=self.webpackChunkrcadmin||[]).push([[160],{160:(P,_,s)=>{s.r(_),s.d(_,{CategoriesModule:()=>U});var g=s(6814),m=s(2296),c=s(1919),M=s(617),u=s(5195),e=s(5879),p=s(3680);let F=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.uc,p.BQ,p.uc,p.BQ]}),o})();var y=s(4170),v=s(2032),x=s(2599),S=s(2939),C=s(7700),f=s(1896),H=s(1894),w=s(3245);function L(o,i){1&o&&e._uU(0," Loading .... ")}const k=function(o){return["","categories","form",o]};function D(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"mat-list-item",6),e._UZ(1,"img",7),e.TgZ(2,"div",8),e._uU(3),e.qZA(),e.TgZ(4,"div",9),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"div",10),e._uU(8),e.qZA(),e.TgZ(9,"button",11)(10,"mat-icon",12),e._uU(11,"info"),e.qZA()(),e.TgZ(12,"button",13),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.deleteCategory(a))}),e.TgZ(13,"mat-icon",14),e._uU(14,"delete"),e.qZA()()()}if(2&o){const t=i.$implicit;e.xp6(1),e.Q6J("src",t.image,e.LSH),e.xp6(2),e.Oqu(t.title),e.xp6(2),e.Oqu(e.lcZ(6,5,t.updatedAt)),e.xp6(3),e.hij(" ",t.details," "),e.xp6(1),e.Q6J("routerLink",e.VKq(7,k,t.id))}}function Z(o,i){if(1&o&&(e.ynx(0),e.YNc(1,D,15,9,"mat-list-item",5),e.BQk()),2&o){const t=i.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}const R=function(){return["","categories","form"]};let $=(()=>{class o{constructor(t,r){this.categoriesService=t,this.dialog=r}ngOnInit(){this.categories$=this.categoriesService.getAllCategories()}deleteCategory(t){this.dialog.open(H.L,{width:"250px",data:{type:"category",model:t,name:t.title}}).afterClosed().subscribe(n=>{this.categories$=this.categoriesService.getAllCategories()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(w.G),e.Y36(C.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-categories"]],decls:12,vars:6,consts:[[1,"mt-5","flex","justify-between","items-center"],[1,"text-lg","font-bold","px-3","my-3"],["mat-fab","","color","primary",3,"routerLink"],["loadingCats",""],[4,"ngIf","ngIfElse"],["class","border-b-2",4,"ngFor","ngForOf"],[1,"border-b-2"],["matListItemAvatar","",3,"src"],["matListItemTitle",""],["matListItemLine",""],["matListItemMeta",""],["mat-icon-button","","matListItemMeta","",3,"routerLink"],["color","primary"],["mat-icon-button","","matListItemMeta","",3,"click"],["color","warn"]],template:function(t,r){if(1&t&&(e.TgZ(0,"mat-list")(1,"div",0)(2,"div",1),e._uU(3,"Categories"),e.qZA(),e.TgZ(4,"mat-action-list")(5,"button",2)(6,"mat-icon"),e._uU(7,"add"),e.qZA()()()(),e.YNc(8,L,1,0,"ng-template",null,3,e.W1O),e.YNc(10,Z,2,1,"ng-container",4),e.ALo(11,"async"),e.qZA()),2&t){const n=e.MAs(9);e.xp6(5),e.Q6J("routerLink",e.DdM(5,R)),e.xp6(5),e.Q6J("ngIf",e.lcZ(11,3,r.categories$))("ngIfElse",n)}},dependencies:[g.sg,g.O5,f.rH,m.RK,m.cs,c.i$,c.lT,c.Tg,c.D1,c.WW,c.sL,c.ni,M.Hw,g.Ov,g.uU]}),o})();var l=s(6223),G=s(4825),z=s(4052);function E(o,i){if(1&o&&(e.TgZ(0,"div",12),e._UZ(1,"div",13),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Akn("background-image: url("+t.imageDisplay+");")}}let b=(()=>{class o{constructor(t,r,n,a,d){this.formBuilder=t,this.route=r,this.location=n,this.categoriesService=a,this._snackBar=d,this.isSubmitted=!1,this.editMode=!1}ngOnInit(){this.initForm(),this.checkEditMode()}onSubmit(){this.isSubmitted=!0;const t=new FormData;Object.keys(this.categoryForm).map(r=>{t.append(r,this.categoryForm[r].value)}),this.editMode?this.updateCategory(t):this.createCategory(t)}createCategory(t){this.categoriesService.createCategory(t).subscribe({next:r=>{this.isSubmitted=!1,this.openSnackBar("\u062a\u0645 \u0627\u0646\u0634\u0627\u0621 \u0641\u0625\u0629 \u062c\u062f\u064a\u062f\u0629","\u0627\u0646\u0634\u0627\u0621 \u0641\u0625\u0629 \u0622\u062e\u0631\u0649","success"),(0,G.H)(4e3).subscribe(()=>this.location.back())},error:r=>{this.isSubmitted=!1,this.openSnackBar("\u062e\u0637\u0623","\u062d\u062f\u062b \u062e\u0637\u0623 \u0645\u0627","warn"),console.log(r)}})}updateCategory(t){this.categoriesService.updateCategory(t).subscribe({next:r=>{this.isSubmitted=!1,this.openSnackBar("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0641\u0625\u0629 \u062c\u062f\u064a\u062f\u0629","\u0627\u0646\u0634\u0627\u0621 \u0641\u0625\u0629 \u0622\u062e\u0631\u0649","success"),(0,G.H)(4e3).subscribe(()=>this.location.back())},error:r=>{this.isSubmitted=!1,this.openSnackBar("\u062e\u0637\u0623","\u062d\u062f\u062b \u062e\u0637\u0623 \u0645\u0627","warn")}})}checkEditMode(){this.route.params.subscribe(t=>{t.id&&(this.editMode=!0,this.categoriesService.getCategory(t.id).subscribe(r=>{this.categoryForm.id.setValue(r.id),this.categoryForm.title.setValue(r.title),this.categoryForm.details.setValue(r.details),this.categoryForm.image.setValue(r.image),this.imageDisplay=r.image,this.categoryForm.active.setValue(r.active)}))})}onImageUpload(t){const r=t.files[0];if(r){this.form.patchValue({image:r}),this.form.get("image")?.updateValueAndValidity();const n=new FileReader;n.onload=()=>{this.imageDisplay=n.result},n.readAsDataURL(r)}}initForm(){this.form=this.formBuilder.group({id:[""],title:["",l.kI.required],details:[""],image:[""],color:[""],active:[!0]})}openSnackBar(t,r,n){this._snackBar.openFromComponent(z.v,{duration:3e3,data:{message:t,action:r,status:n}})}get categoryForm(){return this.form.controls}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36(f.gz),e.Y36(g.Ye),e.Y36(w.G),e.Y36(S.ux))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-category-form"]],decls:27,vars:5,consts:[[1,"mx-5","my-14","p-5"],[1,"flex","flex-wrap","justify-around",3,"formGroup"],[1,"w-1/2","p-3"],["matInput","","type","text","formControlName","title"],["matInput","","type","text","formControlName","details"],["color","primary","formControlName","active"],["class","w-1/2 h-52 p-3",4,"ngIf"],["type","button","mat-raised-button","",3,"click"],["hidden","","type","file",3,"change"],["fileInput",""],[3,"align"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"w-1/2","h-52","p-3"],[1,"h-full","w-full","bg-no-repeat","bg-contain"]],template:function(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"mat-card",0)(1,"mat-card-title"),e._uU(2,"Create a Category"),e.qZA(),e.TgZ(3,"mat-card-content")(4,"form",1)(5,"div",2)(6,"mat-form-field")(7,"mat-label"),e._uU(8,"\u0627\u0644\u0639\u0648\u0627\u0646"),e.qZA(),e._UZ(9,"input",3),e.qZA()(),e.TgZ(10,"div",2)(11,"mat-form-field")(12,"mat-label"),e._uU(13,"\u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644"),e.qZA(),e._UZ(14,"input",4),e.qZA()(),e.TgZ(15,"div",2)(16,"mat-slide-toggle",5),e._uU(17," \u0645\u0641\u0639\u0644 "),e.qZA()(),e.YNc(18,E,2,2,"div",6),e.TgZ(19,"div",2)(20,"button",7),e.NdJ("click",function(){e.CHM(n);const d=e.MAs(23);return e.KtG(d.click())}),e._uU(21," Choose File "),e.qZA(),e.TgZ(22,"input",8,9),e.NdJ("change",function(){e.CHM(n);const d=e.MAs(23);return e.KtG(r.onImageUpload(d))}),e.qZA()()()(),e.TgZ(24,"mat-card-actions",10)(25,"button",11),e.NdJ("click",function(){return r.onSubmit()}),e._uU(26),e.qZA()()()}2&t&&(e.xp6(4),e.Q6J("formGroup",r.form),e.xp6(14),e.Q6J("ngIf",r.editMode||r.imageDisplay),e.xp6(6),e.Q6J("align","end"),e.xp6(1),e.Q6J("disabled",r.isSubmitted),e.xp6(1),e.hij(" ",r.editMode?"\u062a\u0639\u062f\u064a\u0644":"\u0625\u0646\u0634\u0627\u0621"," "))},dependencies:[g.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,m.lW,u.a8,u.hq,u.dn,u.n5,y.KE,y.hX,v.Nt,x.Rr]}),o})();const B=[{path:"",component:$},{path:"form",component:b},{path:"form/:id",component:b}];let j=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[f.Bz.forChild(B),f.Bz]}),o})(),U=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.ez,l.u5,l.UX,j,m.ot,c.ie,M.Ps,u.QW,F,y.lN,v.c,x.rP,S.ZX,C.Is]}),o})()}}]);