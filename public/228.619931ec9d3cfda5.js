"use strict";(self.webpackChunkrcadmin=self.webpackChunkrcadmin||[]).push([[228],{6228:(_,l,r)=>{r.r(l),r.d(l,{DashboardModule:()=>J});var c=r(6814),a=r(9025),m=r(9862),C=r(1919),u=r(1896),o=r(5879),h=r(2096),f=r(7398),g=r(6306),y=r(553);const M=["#556b2f","#ff4500","#ffd700","#00ff00","#00ffff","#a020f0","#6495ed","#ff1493","#ff1493","#006400","#ff0000","#ff00ff","#ffb6c1"];function w(e,t){if(1&e){const n=o.EpF();o.TgZ(0,"map-directions-renderer",8),o.NdJ("mapClick",function(){o.CHM(n);const s=o.oxw().$implicit;return o.KtG(s.options.infoWindow.open())}),o.qZA()}if(2&e){const n=t.ngIf,i=o.oxw().$implicit;o.Q6J("directions",n)("options",i.options)}}function k(e,t){if(1&e&&(o.ynx(0),o.YNc(1,w,1,2,"map-directions-renderer",7),o.ALo(2,"async"),o.BQk()),2&e){const n=t.$implicit;o.xp6(1),o.Q6J("ngIf",o.lcZ(2,1,n.directionResult$))}}function x(e,t){if(1&e){const n=o.EpF();o.ynx(0),o.TgZ(1,"map-marker",9,10),o.NdJ("mapClick",function(){o.CHM(n);const s=o.MAs(2),p=o.MAs(4),d=o.oxw(3);return o.KtG(d.openInfoWindow(s,p))}),o.qZA(),o.TgZ(3,"map-info-window",null,11)(5,"div",12),o._UZ(6,"img",13),o.TgZ(7,"h5",14),o._uU(8),o.qZA(),o.TgZ(9,"span"),o._uU(10),o.qZA()()(),o.BQk()}if(2&e){const n=t.$implicit;o.xp6(1),o.Q6J("position",n.position),o.xp6(5),o.Q6J("src",n.user.image,o.LSH),o.xp6(2),o.hij("\u0627\u0644\u0627\u0633\u0645: ",n.user.name,""),o.xp6(2),o.hij("\u0627\u0644\u062a\u0631\u062a\u064a\u0628: ",n.order,"")}}function A(e,t){if(1&e&&(o.ynx(0),o.TgZ(1,"google-map",1,2),o.YNc(3,k,3,3,"ng-container",3),o.GkF(4),o.YNc(5,x,11,4,"ng-container",3),o._UZ(6,"map-marker",4),o.TgZ(7,"map-info-window")(8,"div",5)(9,"h5"),o._uU(10,"User location"),o.qZA(),o._UZ(11,"img",6),o.qZA()()(),o.BQk()),2&e){const n=o.oxw(2);o.xp6(1),o.Q6J("options",n.options),o.xp6(2),o.Q6J("ngForOf",n.rcdRenders),o.xp6(2),o.Q6J("ngForOf",n.rcdRenders),o.xp6(1),o.Q6J("position",n.clientPosition)}}function T(e,t){if(1&e&&(o.TgZ(0,"div"),o.YNc(1,A,12,4,"ng-container",0),o.ALo(2,"async"),o.qZA()),2&e){const n=o.oxw();o.xp6(1),o.Q6J("ngIf",o.lcZ(2,1,n.apiLoaded))}}let Z=(()=>{class e{constructor(n,i){this.http=n,this.mapDirectionsService=i,this.workers=[],this.options={center:{lat:18.077819265626548,lng:-15.96880064486457},zoom:12,mapTypeControl:!1},this.rcdRenders=[]}ngOnInit(){this.apiLoaded=this.http.jsonp(`https://maps.googleapis.com/maps/api/js?key=${y.N.mapApiKey}`,"callback").pipe((0,f.U)(()=>!0),(0,g.K)(()=>(0,h.of)(!1))),this.clusterApiLoaded=this.http.jsonp("https://unpkg.com/@googlemaps/markerclustererplus/dist/index.min.js","callback").pipe((0,f.U)(()=>!0),(0,g.K)(()=>(0,h.of)(!0)))}ngOnChanges(n){this.showClient(),this.showWorkers()}openInfoWindow(n,i,s){i.open(n)}loadDirections(){}showWorkers(){this.workers?this.workers.forEach((n,i)=>{const p=n.location?.replace("(","").replace(")","")?.split(", ");if(p){const d=new google.maps.LatLng(+p[0],+p[1]),Q={origin:this.clientPosition,destination:d,travelMode:google.maps.TravelMode.DRIVING};this.rcdRenders.push({user:n,directionResult$:this.mapDirectionsService.route(Q).pipe((0,f.U)(v=>v.result)),position:d,options:{polylineOptions:{strokeColor:M[i]},markerOptions:{visible:!1}},order:i+1})}}):console.log("No workers yet ...")}showClient(){if(this.client){const i=this.client.location?.replace("(","").replace(")","")?.split(", ");i&&(this.clientPosition=new google.maps.LatLng(+i[0],+i[1]))}else console.log("No Clients Yet")}loadDirection(){}}return e.\u0275fac=function(n){return new(n||e)(o.Y36(m.eN),o.Y36(a.Tx))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-map"]],viewQuery:function(n,i){if(1&n&&o.Gf(a.ch,5),2&n){let s;o.iGM(s=o.CRH())&&(i.infoWindow=s.first)}},inputs:{clientPosition:"clientPosition",workers:"workers",client:"client"},features:[o.TTD],decls:2,vars:3,consts:[[4,"ngIf"],["width","100%","height","100vh",3,"options"],["map",""],[4,"ngFor","ngForOf"],["icon","assets/markers/client.png",3,"position"],[1,"w-32","h-20","text-center"],["src","assets/holders/profile.png","alt","user profile","height","24","width","24",1,"mx-auto"],[3,"directions","options","mapClick",4,"ngIf"],[3,"directions","options","mapClick"],["icon","assets/holders/profile-marker.png",3,"position","mapClick"],["clientMarker","mapMarker"],["infoWindow","mapInfoWindow"],[1,"w-full","flex","flex-col","justify-center","items-center"],["width","74",1,"mx-auto",3,"src"],[1,"text-lg"]],template:function(n,i){1&n&&(o.YNc(0,T,3,3,"div",0),o.ALo(1,"async")),2&n&&o.Q6J("ngIf",o.lcZ(1,1,i.clusterApiLoaded))},dependencies:[c.sg,c.O5,a.b6,a.jG,a.ch,a.O_,c.Ov]}),e})();const D=[{path:"",component:(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-dashboard"]],decls:3,vars:0,consts:[[1,"w-full","h-full","flex"],[1,"w-full"]],template:function(n,i){1&n&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"app-map"),o.qZA()())},dependencies:[Z]}),e})()}];let I=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[u.Bz.forChild(D),u.Bz]}),e})();var P=r(2296),S=r(617);let J=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[c.ez,I,a.Y4,m.Ed,m.JF,C.ie,P.ot,S.Ps]}),e})()},553:(_,l,r)=>{r.d(l,{N:()=>c});const c={production:!0,api:"https://khedemat-f288702c9f00.herokuapp.com",mapApiKey:"AIzaSyDgHUxKkPw186OXTisIdj8EfLidfO7Kc0A"}}}]);